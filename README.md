## The Joke REST API

#### Перед началом
Убедитесь, что в вашей среде присутствуют virtualenv, git.
Требуемая версия языка Python 3


#### Установка
Сначала необходимо загрузить код приложения из репозитория:
```
cd /path/to/my/workspace/
git clone https://github.com/iservak/jokes
cd jokes
```

Далее создать виртуальное окружение в директории `venv`, активировать его и выполнить установку требуемых зависимостей:
```
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

Теперь установим приложение и запустим его:
```
python setup.py develop
cd jokes
flask db reset
python3 app.py
```

После запуска приложения можно открыть браузер на странице http://localhost:5000/api
Там будет представлен список доступных API-методов через Swagger UI


#### Работа с приложением
Регистрация пользователя проводится через `/api/user/`. Параметр username передаст желаемое имя пользователя.
Другой пользователь не может зарегистрироваться с таким же именем.

При успешной регистрации API вернет token для работы с другими методами. В дальнейшей работе его необходимо передавать в заголовке, параметр `X-API-KEY`.

Для работы с пользовательскими шутками приложение предоставляет следующий набор эндпоинтов:
* получение списка шуток
* получение шутки по идентификатору (принадлежащие авторизованному пользователю)
* создание шутки по тексту в передаваемом параметре
* обновление текста шутки
* удаление шутки
* генерация шутки на стороннем сервисе и сохранение в список


В приложении предусмотрено два типа пользователей - без привилегий и с ними. Устанавливается в поле `is_admin` модели `User`.
По умолчанию пользователь создается без привилегий. Для повышения привилегий пользователя необходимо ввести команду:
```
flask user set-admin username
```

Пользователь с привилегиями имеет доступ к просмотру журнала событий через `/api/logs/`.
